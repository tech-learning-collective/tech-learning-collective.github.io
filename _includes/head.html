<head>
    <meta http-equiv="X-UA-Compatible" content="chrome=1" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta charset="utf-8" />
    <title>{% include title-text.html %}</title>
    <link rel="shortcut icon" type="image/png" href="{% link static/images/icon.chip.blue.png %}" />

    <link rel="stylesheet" href="{% link static/css/main.css %}" />
    {% if "events" == page.collection %}<link rel="stylesheet" href="{% link static/css/event-flyer.css %}" media="print" />{% endif %}

    <link rel="canonical" href="{{ page.url | absolute_url }}" />

    {% if site.posts %}<link rel="alternate" href="{% link blog/feed.xml %}" type="application/rss+xml" title="{% include gettext.liquid key="latest_posts" var=site.rss.items %}" />{% endif %}
    {% if site.events %}<link rel="alternate" href="{% link events/all.ics %}" type="text/calendar" title="{% include gettext.liquid key="subscribe_to_events" %}" />{% endif %}

    {% if page.next %}<link rel="next" href="{{ page.next.url | relative_url }}" />{% endif %}
    {% if page.previous %}<link rel="prev" href="{{ page.previous.url | relative_url }}" />{% endif %}

    <meta itemprop="name" content="{% include title-text.html %}" />
    <meta itemprop="url" content="{{ page.url | absolute_url }}" />

    <meta property="og:site_name" content="{{ site.title }}" />
    <meta property="og:title" content="{% include title-text.html %}" />
    <meta property="og:url" content="{{ page.url | absolute_url }}" />
    <meta property="og:type" content="website" />
    <meta property="og:description" content="{{ site.description }}" />
    <meta property="og:image" content="{% link static/images/icon.chip.blue.png %}" />

    <meta name="twitter:title" content="{% include title-text.html %}" />
    <meta name="twitter:url" content="{{ page.url | absolute_url }}" />
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:description" content="{{ site.description }}" />
    <meta name="twitter:image" content="{% link static/images/icon.chip.blue.png %}" />
{% if page.backgroundColor %}
<style>
/**
 * Color fades.
 */
body {
    background-color: {{ page.backgroundColor }};
}
body.page header {
    position: relative;
}
body.page header::before {
    content: '';
    position: absolute;
    right: -30px;
    width: 30px;
    height: 100%;
    {% comment %} We have to use rgba() color syntax for Safari to accept the fade-to-transparent effect. {% endcomment %}
    background-image: linear-gradient(to right, {{ page.backgroundColor }}, {{ page.backgroundColor | replace: "1)", "0)" }});
}
body.page header::after {
    content: '';
    position: fixed;
    right: 25px;
    width: 30px;
    height: 100%;
    background-image: linear-gradient(to left, {{ page.backgroundColor }}, {{ page.backgroundColor | replace: "1)", "0)" }});
}

.dotleader span,
.dotleader.price td:last-child::before,
.dotleader.price td:last-child::after {
    background-color: {{ page.backgroundColor }};
}
</style>
{% endif %}
{% if "events" == page.collection and page.flyer != nil %}
{% assign styles = site.data.flyers[page.flyer] %}
<style media="print">
.h-event {
{% for declaration in styles.default %}
    {{ declaration[0] }}: {{ declaration[1] }};
{% endfor %}
}
{% for rule in styles.rules %}
{% for selector in rule.selectors %}
{{ selector }}{% if loop.last %}, {% endif %} {
    {% for declaration in rule.declarations %}
    {{ declaration[0] }}: {{ declaration[1] }};
    {% endfor %}
}
{% endfor %}
{% endfor %}
</style>
{% endif %}
</head>
