<ul>
    {% assign site_menus = site.menus %}{% comment %} Generated by the `jekyll-menus` plugin. {% endcomment %}
    {% unless site_menus %}{% assign site_menus = site.data.menus %}{% endunless %}{% comment %} Fallback for when `jekyll-menus` is not present. {% endcomment %}
    {% assign the_menu = site_menus.main | where: "lang", lang | sort: "weight" %}
    {% for item in the_menu  %}
    {% assign the_page = page.path | split: "/" | first %}
    {% assign the_item = item.url | split: "/" | join: "" %}
    <li class="main-nav-{{ item.title | slugify }} {% if the_page == the_item %}current{% endif %}">
        <a href="{{ item.url | relative_url }}"{% if item.title_text %} title="{{ item.title_text }}"{% endif %}>
            {{- item.title -}}
        </a>
        {% comment %}TODO: Second-level submenu; no recursion yet. {% endcomment %}
        {% if item.submenu %}
        <ul>
        {% for subitem in item.submenu %}
            <li>
                <a href="{{ subitem.url | relative_url }}"{% if subitem.title_text %} title="{{ subitem.title_text }}"{% endif %}>
                    {{- subitem.title -}}
                </a>
            </li>
        {% endfor %}
        </ul>
        {% endif %}
    </li>
    {% endfor %}
</ul>
